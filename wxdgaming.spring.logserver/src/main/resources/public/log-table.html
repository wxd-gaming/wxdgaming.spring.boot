<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script charset="utf-8" type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script charset="utf-8" type="text/javascript" src="/js/com.wxd.js"></script>
    <script charset="utf-8" type="text/javascript" src="/js/pageview.js"></script>
    <title>b</title>
    <link rel="stylesheet" type="text/css" href="/style/com.wxd.css"/>
    <link rel="stylesheet" type="text/css" href="/style/table.css"/>
    <style>

        html, body {
            display: block;overflow: auto;width: 100%;height: 100%;
            font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
            color: #535252;
            min-width: 1400px;
        }

        a:link {color: #0866b4;}

        a:visited { color: #0866b4;}

        label {padding-left: 5px;padding-right: 5px;}
    </style>
    <script>

        let pageView = null;

        function search() {
            wxd.loading();
            let urlQuery = new wxd.Map().loadSearch();
            urlQuery.put("minDay", $("#minDay").val());
            urlQuery.put("maxDay", $("#maxDay").val());
            pageView.remoteGetData(urlQuery);
        }


        function createRow(index, row) {
            let tr = `<tr>`;
            for (let i = 0; i < pageView.columnNames.length; i++) {
                let columnName = pageView.columnNames[i];
                let columnComment = pageView.columnComments[i];
                tr += `<td ondblclick="wxd.message.alert('${row[columnName]}', '${columnComment}');">${row[columnName]}</td>`;
            }
            tr += `</tr>`;
            return tr;
        }

        $(() => {
            wxd.loading();
            let urlQuery = new wxd.Map().loadSearch();
            pageView = new PageView("/api/log/logPage", search, createRow);
            pageView.gameId = urlQuery.get("gameId");


            let url = "/api/log/logTitle";
            let map = new wxd.Map();
            map.loadSearch();
            wxd.netty.post(url, map.toString(), (response) => {
                if (response.code === 1) {
                    let data = response.data;
                    for (let i = 0; i < data.length; i++) {
                        let item = data[i];
                        pageView.columnNames[i] = item.name;
                        pageView.columnComments[i] = item.comment;
                        let l = `<th class="${item.name}">${item.comment}</th>`;
                        $(".table_head").append(l);
                    }
                    search();
                }
            });

        });
    </script>
</head>
<body>
<div class="btn_box" style="width: 100%;height: 180px;padding-left: 10px; padding-top: 8px; text-align: left;vertical-align: center;">
    <button onclick="search();">查询</button>
    <label for="minDay">范围日期-开始日期: </label><input id="minDay" type="date"/>
    <label for="maxDay">范围日期-结束日期: </label><input id="maxDay" type="date"/>
    <br>
</div>
<div class="tableDom" style="position: absolute;left: 20px;top: 200px;right: 20px;bottom: 40px;padding-right: 10px;border-radius: 0;">
    <table>
        <thead>
        <tr class="table_head">
        </tr>
        </thead>
        <tbody class="tbody">
        </tbody>
    </table>
</div>
</body>
</html>